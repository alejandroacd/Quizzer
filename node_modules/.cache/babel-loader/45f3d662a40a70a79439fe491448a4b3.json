{"ast":null,"code":"import _regeneratorRuntime from\"/Users/invitado/quizzer/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/invitado/quizzer/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/invitado/quizzer/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState,useEffect}from'react';import{auth}from'../firebase';import Axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";var AuthContext=/*#__PURE__*/React.createContext();export var useAuth=function useAuth(){return useContext(AuthContext);};export var AuthProvider=function AuthProvider(_ref){var children=_ref.children;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),db=_useState2[0],setDb=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),currentUser=_useState4[0],setCurrentUser=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var signup=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(email,password,username){var user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return auth.createUserWithEmailAndPassword(email,password).then(function(){user=auth.currentUser;}).then(function(){user.updateProfile({displayName:username});});case 2:return _context.abrupt(\"return\",_context.sent);case 3:case\"end\":return _context.stop();}}},_callee);}));return function signup(_x,_x2,_x3){return _ref2.apply(this,arguments);};}();var login=function login(email,password){return auth.signInWithEmailAndPassword(email,password);};var logout=function logout(){return auth.signOut();};useEffect(function(){var unsubscribe=auth.onAuthStateChanged(function(user){setLoading(false);setCurrentUser(user);});Axios.get('https://quizzerproject.herokuapp.com/db').then(function(resp){setDb(resp.data);});return unsubscribe;},[]);var value={currentUser:currentUser,signup:signup,login:login,logout:logout,db:db};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(AuthContext.Provider,{value:value,children:!loading&&children})});};","map":{"version":3,"sources":["/Users/invitado/quizzer/client/src/contexts/AuthContext.js"],"names":["React","useContext","useState","useEffect","auth","Axios","AuthContext","createContext","useAuth","AuthProvider","children","db","setDb","currentUser","setCurrentUser","loading","setLoading","signup","email","password","username","createUserWithEmailAndPassword","then","user","updateProfile","displayName","login","signInWithEmailAndPassword","logout","signOut","unsubscribe","onAuthStateChanged","get","resp","data","value"],"mappings":"4bAAC,MAAOA,CAAAA,KAAP,EAAgBC,UAAhB,CAA4BC,QAA5B,CAAsCC,SAAtC,KAAsD,OAAtD,CACD,OAASC,IAAT,KAAqB,aAArB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,2CAGA,GAAMC,CAAAA,WAAW,cAAGN,KAAK,CAACO,aAAN,EAApB,CAEA,MAAO,IAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CACxB,MAAOP,CAAAA,UAAU,CAACK,WAAD,CAAjB,CACJ,CAFM,CAIP,MAAO,IAAMG,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,MAAgB,IAAdC,CAAAA,QAAc,MAAdA,QAAc,CACxC,cAAmBR,QAAQ,CAAC,EAAD,CAA3B,wCAAOS,EAAP,eAAUC,KAAV,eACA,eAAsCV,QAAQ,EAA9C,yCAAOW,WAAP,eAAoBC,cAApB,eACA,eAA8BZ,QAAQ,CAAC,IAAD,CAAtC,yCAAOa,OAAP,eAAgBC,UAAhB,eAGA,GAAMC,CAAAA,MAAM,2FAAI,iBAAOC,KAAP,CAAaC,QAAb,CAAsBC,QAAtB,iJAEAhB,CAAAA,IAAI,CAACiB,8BAAL,CAAoCH,KAApC,CAA0CC,QAA1C,EACVG,IADU,CACJ,UAAK,CACRC,IAAI,CAAGnB,IAAI,CAACS,WAAZ,CACH,CAHU,EAIVS,IAJU,CAIJ,UAAM,CACTC,IAAI,CAACC,aAAL,CAAmB,CAChBC,WAAW,CAAEL,QADG,CAAnB,EAGH,CARU,CAFA,6GAAJ,kBAANH,CAAAA,MAAM,qDAAZ,CAaA,GAAMS,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAACR,KAAD,CAAOC,QAAP,CAAoB,CAC7B,MAAOf,CAAAA,IAAI,CAACuB,0BAAL,CAAgCT,KAAhC,CAAsCC,QAAtC,CAAP,CAEJ,CAHD,CAKA,GAAMS,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACjB,MAAOxB,CAAAA,IAAI,CAACyB,OAAL,EAAP,CACH,CAFD,CAMA1B,SAAS,CAAC,UAAM,CACZ,GAAI2B,CAAAA,WAAW,CAAG1B,IAAI,CAAC2B,kBAAL,CAAwB,SAAAR,IAAI,CAAI,CAC9CP,UAAU,CAAC,KAAD,CAAV,CACAF,cAAc,CAACS,IAAD,CAAd,CACF,CAHgB,CAAlB,CAIClB,KAAK,CAAC2B,GAAN,CAAU,yCAAV,EACCV,IADD,CACM,SAACW,IAAD,CAAQ,CACVrB,KAAK,CAACqB,IAAI,CAACC,IAAN,CAAL,CACH,CAHD,EAMA,MAAOJ,CAAAA,WAAP,CACH,CAZO,CAYL,EAZK,CAAT,CAeA,GAAMK,CAAAA,KAAK,CAAG,CACVtB,WAAW,CAAXA,WADU,CAEVI,MAAM,CAANA,MAFU,CAGVS,KAAK,CAALA,KAHU,CAIVE,MAAM,CAANA,MAJU,CAKVjB,EAAE,CAAFA,EALU,CAAd,CASJ,mBACI,kCACG,KAAC,WAAD,CAAa,QAAb,EAAuB,KAAK,CAAEwB,KAA9B,UAEK,CAACpB,OAAD,EAAYL,QAFjB,EADH,EADJ,CAQC,CA9DM","sourcesContent":[" import React, { useContext, useState, useEffect} from 'react';\nimport { auth } from '../firebase'\nimport Axios from 'axios';\n\n \nconst AuthContext = React.createContext();\n\nexport const useAuth = () => {\n     return useContext(AuthContext)\n}\n\nexport const AuthProvider = ({children}) =>Â {\n    const [db,setDb] = useState([])\n    const [currentUser, setCurrentUser] = useState();\n    const [loading, setLoading] = useState(true)\n \n\n    const signup  = async (email,password,username) => {\n        let user;\n       return await auth.createUserWithEmailAndPassword(email,password)\n         .then( () =>{\n             user = auth.currentUser;\n         })\n         .then( () => {\n             user.updateProfile({\n                displayName: username,\n             })\n         })\n    \n    }\n    const login = (email,password) => {\n         return auth.signInWithEmailAndPassword(email,password)\n         \n    }\n\n    const logout = () => {\n        return auth.signOut();\n    }\n\n\n    \n    useEffect(() => {\n        let unsubscribe = auth.onAuthStateChanged(user => {\n            setLoading(false)\n            setCurrentUser(user)\n         })\n         Axios.get('https://quizzerproject.herokuapp.com/db')\n         .then((resp)=>{\n             setDb(resp.data)\n         })\n\n\n         return unsubscribe;\n     }, [])\n   \n\n    const value = {\n        currentUser,\n        signup,\n        login,\n        logout,\n        db\n        \n       \n    }\nreturn (\n    <div>\n       <AuthContext.Provider  value={value}>\n           \n           {!loading && children}\n       </AuthContext.Provider>\n    </div>\n)\n} "]},"metadata":{},"sourceType":"module"}