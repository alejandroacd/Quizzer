{"ast":null,"code":"var _jsxFileName = \"/Users/invitado/quizzer/client/src/contexts/AuthContext.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useContext, useState, useEffect } from 'react';\nimport { auth } from '../firebase';\nimport Axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/React.createContext();\nexport const useAuth = () => {\n  _s();\n\n  return useContext(AuthContext);\n};\n\n_s(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nexport const AuthProvider = ({\n  children\n}) => {\n  _s2();\n\n  const [db, setDb] = useState([]);\n  const [currentUser, setCurrentUser] = useState();\n  const [loading, setLoading] = useState(true);\n\n  const signup = async (email, password, username) => {\n    let user;\n    return await auth.createUserWithEmailAndPassword(email, password).then(() => {\n      user = auth.currentUser;\n    }).then(() => {\n      user.updateProfile({\n        displayName: username\n      });\n    });\n  };\n\n  const login = (email, password) => {\n    return auth.signInWithEmailAndPassword(email, password);\n  };\n\n  const logout = () => {\n    return auth.signOut();\n  };\n\n  useEffect(() => {\n    let unsubscribe = auth.onAuthStateChanged(user => {\n      setLoading(false);\n      setCurrentUser(user);\n    });\n    Axios.get('http://localhost:3001/db').then(resp => {\n      setDb(resp.data);\n    });\n    return unsubscribe;\n  }, []);\n  const value = {\n    currentUser,\n    signup,\n    login,\n    logout,\n    db\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n      value: value,\n      children: !loading && children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 8\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n};\n\n_s2(AuthProvider, \"s3fLJNw1x48sPR/WtPFttYt3dss=\");\n\n_c = AuthProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"sources":["/Users/invitado/quizzer/client/src/contexts/AuthContext.js"],"names":["React","useContext","useState","useEffect","auth","Axios","AuthContext","createContext","useAuth","AuthProvider","children","db","setDb","currentUser","setCurrentUser","loading","setLoading","signup","email","password","username","user","createUserWithEmailAndPassword","then","updateProfile","displayName","login","signInWithEmailAndPassword","logout","signOut","unsubscribe","onAuthStateChanged","get","resp","data","value"],"mappings":";;;;AAAC,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,QAA5B,EAAsCC,SAAtC,QAAsD,OAAtD;AACD,SAASC,IAAT,QAAqB,aAArB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAGA,MAAMC,WAAW,gBAAGN,KAAK,CAACO,aAAN,EAApB;AAEA,OAAO,MAAMC,OAAO,GAAG,MAAM;AAAA;;AACxB,SAAOP,UAAU,CAACK,WAAD,CAAjB;AACJ,CAFM;;GAAME,O;;AAIb,OAAO,MAAMC,YAAY,GAAG,CAAC;AAACC,EAAAA;AAAD,CAAD,KAAgB;AAAA;;AACxC,QAAM,CAACC,EAAD,EAAIC,KAAJ,IAAaV,QAAQ,CAAC,EAAD,CAA3B;AACA,QAAM,CAACW,WAAD,EAAcC,cAAd,IAAgCZ,QAAQ,EAA9C;AACA,QAAM,CAACa,OAAD,EAAUC,UAAV,IAAwBd,QAAQ,CAAC,IAAD,CAAtC;;AAGA,QAAMe,MAAM,GAAI,OAAOC,KAAP,EAAaC,QAAb,EAAsBC,QAAtB,KAAmC;AAC/C,QAAIC,IAAJ;AACD,WAAO,MAAMjB,IAAI,CAACkB,8BAAL,CAAoCJ,KAApC,EAA0CC,QAA1C,EACVI,IADU,CACJ,MAAK;AACRF,MAAAA,IAAI,GAAGjB,IAAI,CAACS,WAAZ;AACH,KAHU,EAIVU,IAJU,CAIJ,MAAM;AACTF,MAAAA,IAAI,CAACG,aAAL,CAAmB;AAChBC,QAAAA,WAAW,EAAEL;AADG,OAAnB;AAGH,KARU,CAAb;AAUF,GAZD;;AAaA,QAAMM,KAAK,GAAG,CAACR,KAAD,EAAOC,QAAP,KAAoB;AAC7B,WAAOf,IAAI,CAACuB,0BAAL,CAAgCT,KAAhC,EAAsCC,QAAtC,CAAP;AAEJ,GAHD;;AAKA,QAAMS,MAAM,GAAG,MAAM;AACjB,WAAOxB,IAAI,CAACyB,OAAL,EAAP;AACH,GAFD;;AAMA1B,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAI2B,WAAW,GAAG1B,IAAI,CAAC2B,kBAAL,CAAwBV,IAAI,IAAI;AAC9CL,MAAAA,UAAU,CAAC,KAAD,CAAV;AACAF,MAAAA,cAAc,CAACO,IAAD,CAAd;AACF,KAHgB,CAAlB;AAIChB,IAAAA,KAAK,CAAC2B,GAAN,CAAU,0BAAV,EACCT,IADD,CACOU,IAAD,IAAQ;AACVrB,MAAAA,KAAK,CAACqB,IAAI,CAACC,IAAN,CAAL;AACH,KAHD;AAMA,WAAOJ,WAAP;AACH,GAZO,EAYL,EAZK,CAAT;AAeA,QAAMK,KAAK,GAAG;AACVtB,IAAAA,WADU;AAEVI,IAAAA,MAFU;AAGVS,IAAAA,KAHU;AAIVE,IAAAA,MAJU;AAKVjB,IAAAA;AALU,GAAd;AASJ,sBACI;AAAA,2BACG,QAAC,WAAD,CAAa,QAAb;AAAuB,MAAA,KAAK,EAAEwB,KAA9B;AAAA,gBAEK,CAACpB,OAAD,IAAYL;AAFjB;AAAA;AAAA;AAAA;AAAA;AADH;AAAA;AAAA;AAAA;AAAA,UADJ;AAQC,CA9DM;;IAAMD,Y;;KAAAA,Y","sourcesContent":[" import React, { useContext, useState, useEffect} from 'react';\nimport { auth } from '../firebase'\nimport Axios from 'axios';\n\n \nconst AuthContext = React.createContext();\n\nexport const useAuth = () => {\n     return useContext(AuthContext)\n}\n\nexport const AuthProvider = ({children}) =>Â {\n    const [db,setDb] = useState([])\n    const [currentUser, setCurrentUser] = useState();\n    const [loading, setLoading] = useState(true)\n \n\n    const signup  = async (email,password,username) => {\n        let user;\n       return await auth.createUserWithEmailAndPassword(email,password)\n         .then( () =>{\n             user = auth.currentUser;\n         })\n         .then( () => {\n             user.updateProfile({\n                displayName: username,\n             })\n         })\n    \n    }\n    const login = (email,password) => {\n         return auth.signInWithEmailAndPassword(email,password)\n         \n    }\n\n    const logout = () => {\n        return auth.signOut();\n    }\n\n\n    \n    useEffect(() => {\n        let unsubscribe = auth.onAuthStateChanged(user => {\n            setLoading(false)\n            setCurrentUser(user)\n         })\n         Axios.get('http://localhost:3001/db')\n         .then((resp)=>{\n             setDb(resp.data)\n         })\n\n\n         return unsubscribe;\n     }, [])\n   \n\n    const value = {\n        currentUser,\n        signup,\n        login,\n        logout,\n        db\n        \n       \n    }\nreturn (\n    <div>\n       <AuthContext.Provider  value={value}>\n           \n           {!loading && children}\n       </AuthContext.Provider>\n    </div>\n)\n} "]},"metadata":{},"sourceType":"module"}